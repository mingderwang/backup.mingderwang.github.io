<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Identify slow queries &#8211; Log4資料分析公司</title>
<meta name="description" content="What’s happen if you found database queries are slow sometime. How to config your logs for mysql to identify the causes. It’s not easy, but
some ways you can do first if there is no any other specific reason from resource shortage.

">
<meta name="keywords" content="devops, mysql, database">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Identify slow queries">
<meta name="twitter:description" content="What’s happen if you found database queries are slow sometime. How to config your logs for mysql to identify the causes. It’s not easy, but
some ways you can do first if there is no any other specific reason from resource shortage.

">
<meta name="twitter:site" content="@mingderwang">
<meta name="twitter:creator" content="@mingderwang">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="//www.log4analytics.com/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Identify slow queries">
<meta property="og:description" content="What’s happen if you found database queries are slow sometime. How to config your logs for mysql to identify the causes. It’s not easy, but
some ways you can do first if there is no any other specific reason from resource shortage.

">
<meta property="og:url" content="//www.log4analytics.com/ming/identify-slow-queries-for-mysql/">
<meta property="og:site_name" content="Log4資料分析公司">





<link rel="canonical" href="//www.log4analytics.com/ming/identify-slow-queries-for-mysql/">
<link href="//www.log4analytics.com/feed.xml" type="application/atom+xml" rel="alternate" title="Log4資料分析公司 Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="//www.log4analytics.com/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="//www.log4analytics.com/assets/js/vendor/html5shiv.min.js"></script>
	<script src="//www.log4analytics.com/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="//www.log4analytics.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="//www.log4analytics.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="//www.log4analytics.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="//www.log4analytics.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="//www.log4analytics.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="//www.log4analytics.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="//www.log4analytics.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="//www.log4analytics.com">Log4資料分析公司</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="//www.log4analytics.com/products/" >產品介紹</a></li>
					  
					    
					        
					    
					    <li><a href="//www.log4analytics.com/pricing/" >服務價格</a></li>
					  
					    
					        
					    
					    <li><a href="//www.log4analytics.com/posts/" >技術日誌</a></li>
					  
					    
					        
					    
					    <li><a href="//www.log4analytics.com/about/" >關於我們</a></li>
					  
					    
					        
					        
					    <li><a href="https://chef-server.log4analytics.com" target="_blank">chef伺服器</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  


	<img src="//www.log4analytics.com/images/logo.jpg" class="bio-photo" alt="Ming-der Wang bio photo">

<h3>Ming-der Wang</h3>
<p>The joy of logging everything.</p>
<a href="mailto:sales@log4analytics.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/mingderwang" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>














  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="//www.log4analytics.com/ming/identify-slow-queries-for-mysql/" rel="bookmark" title="Identify slow queries">Identify slow queries</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>What’s happen if you found database queries are slow sometime. How to config your logs for mysql to identify the causes. It’s not easy, but
some ways you can do first if there is no any other specific reason from resource shortage.</p>

<p>Check your database status if any slow queries are there.</p>

<pre><code>$ mysqladmin -u root -p status
Enter password:
Uptime: 126005  Threads: 1  Questions: 109  Slow queries: 0  Opens: 327  Flush tables: 1  Open tables: 80  Queries per second avg: 0.000
</code></pre>

<p>or for Percona, you can issue following command;</p>

<pre><code>$ sudo service mysql status
 * /usr/bin/mysqladmin  Ver 8.42 Distrib 5.5.38-35.2, for debian-linux-gnu on x86_64
...
Uptime:     76 days 9 hours 17 min 56 sec

Threads: 41  Questions: 148972423  Slow queries: 5894447  Opens: 1489  Flush tables: 1  Open tables: 552  Queries per second avg: 22.572
</code></pre>

<p>If you found many slow queries in last line, you can decide to enable slow queries log for tracking this issue.
Unmark following two lines in your /etc/mysql/my.cnf file to enable logs for slow queries.</p>

<pre><code>log_slow_queries        = /var/log/mysql/mysql-slow.log
long_query_time = 2
</code></pre>

<p>where 2 means only log mysql queries exec longer than 2 seconds. And then, restart your mysql service.
There will log some slow queries for you to tune your code for database access. Of course, for the performance issue, you can disable it when it is not necessaryi anymore.</p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
  


	<img src="//www.log4analytics.com/images/logo.jpg" class="bio-photo" alt="Ming-der Wang bio photo">

<h3>Ming-der Wang</h3>
<p>The joy of logging everything.</p>
<a href="mailto:sales@log4analytics.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/mingderwang" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>














        </div>
        <p class="byline"><strong>Identify slow queries</strong> was published on <time datetime="2014-04-13T17:42:00+08:00">April 13, 2014</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="//www.log4analytics.com/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="//www.log4analytics.com/ming/why-big-data/" title="Identify slow queries">Identify slow queries</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2015 Log4資料分析. 桐立科技 Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="//www.log4analytics.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="//www.log4analytics.com/assets/js/scripts.min.js"></script>

	        

</body>
</html>